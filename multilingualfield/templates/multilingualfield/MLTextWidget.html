<div>
    <input type="text"
           id="language_widget_{{name}}_input"
           class="language_html ck_{{name}}"
           value="{{ ml_json }}" />
    <input type="text" id="id_{{name}}" name="{{name}}" style="display:none" />
</div>

<script>
    $(function(){
        var ml_{{ name }}_data = {{ ml_json|safe }};
        var ml_{{ name }}_language = {{ ml_language|safe }};
        var ml_all_langs = {{ langs|safe }};

        $('#language_widget_{{name}}_input').val(ml_{{name}}_data["{{ current_language }}"]);

        $('#language_widget_{{name}}_input').change(function(){
            if( $('#language_widget_{{name}}_input').val() != "" ) {
                ml_{{ name }}_data['{{ current_language }}'] = $('#language_widget_{{name}}_input').val();
            }
            $('#id_{{name}}').val(JSON.stringify(ml_{{ name }}_data));
        });
        $('#id_{{name}}').val(JSON.stringify(ml_{{name}}_data));
    });
</script>